---
import MainLayout from "../layouts/MainLayout.astro";
const email = import.meta.env.PUBLIC_CONTACT_EMAIL;
const pageTitle = "Contact Me";
---

<MainLayout pageTitle={pageTitle}>
  <section class="contact-section">
    <h1>Let's get in touch</h1>
    <p>
      If you have a project idea or just want to say hi, use the form below.
    </p>

    <form
      action={`https://formsubmit.co/${email}`}
      method="POST"
      class="contact-form"
    >
      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_template" value="box" />
      <input
        type="hidden"
        name="_next"
        value="http://localhost:4321/contact?sent=true"
      />

      <label>
        Full Name*
        <input type="text" name="name" required pattern="^[A-Za-zÀ-ÿ\s]{3,}$" />
      </label>

      <label>
        Email*
        <input type="email" name="email" required />
      </label>

      <label>
        Subject
        <input type="text" name="subject" />
      </label>

      <label>
        Message*
        <textarea name="message" rows="5" required minlength="10"></textarea>
      </label>

      <label>
        What is the result of five plus three?* (Anti-bot)
        <input type="text" name="antibot" required pattern="[eE]ight" />
      </label>

      <div style="display: none;">
        <label
          >Leave this field empty:
          <input type="text" name="honeypot" />
        </label>
      </div>

      <button type="submit">Send Message</button>
    </form>
  </section>

  <script>
    const params = new URLSearchParams(window.location.search);
    if (params.get("sent") === "true") {
      alert("Message sent successfully!");
      window.history.replaceState({}, document.title, window.location.pathname);
    }
  </script>

  <style>
    .contact-section {
      max-width: 700px;
      margin: 0 auto;
      padding: 2rem 1rem;
      text-align: center;
    }

    .contact-section h1 {
      color: var(--color-primary);
      margin-bottom: 0.5rem;
    }

    .contact-section p {
      color: var(--color-text);
      margin-bottom: 2rem;
    }

    .contact-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      text-align: left;
    }

    .contact-form label {
      font-weight: bold;
      color: var(--color-secondary);
    }

    .contact-form input,
    .contact-form textarea {
      width: 100%;
      padding: 0.75rem;
      border-radius: 0.5rem;
      border: 1px solid var(--color-gray);
      background: var(--color-bg);
      color: var(--color-text);
      font-size: 1rem;
    }

    .contact-form button {
      background: var(--color-primary);
      color: white;
      padding: 0.75rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s ease;
    }

    .contact-form button:hover {
      background: var(--color-secondary);
    }
  </style>
</MainLayout>
